var R=Object.defineProperty;var E=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var y=(r,t,n)=>t in r?R(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,g=(r,t)=>{for(var n in t||(t={}))k.call(t,n)&&y(r,n,t[n]);if(E)for(var n of E(t))N.call(t,n)&&y(r,n,t[n]);return r};import{S as T,i as C,s as _,e as a,k as $,c as p,a as m,d as i,n as x,f as l,J as h,K as v,I as f,j as w,m as S,o as I,x as O,u as A,v as j}from"../chunks/vendor-8aaeb33b.js";const X=r=>r.split("").reduce((t,n)=>(t[n]?t[n]+=1:t[n]=1,t),{}),q=r=>{if(Object.keys(r).length===0)return;if(Object.keys(r).length===1)return Object.keys(r)[0];let t=Object.entries(r).map(([e,s])=>({node:e,nodeSum:s})).sort((e,s)=>s.nodeSum-e.nodeSum);for(;t.length>1;){const e=t.pop(),s=t.pop(),u={1:e.node,0:s.node},o=e.nodeSum+s.nodeSum;t.push({node:u,sum:o}),t.sort((c,d)=>d.nodeSum-c.nodeSum)}return t[0].node},L=r=>{for(const t in r)r[t]=r[t].split("").reverse().join("")},D=r=>{if(r===void 0)return;if(typeof r!="object")return{[r]:"0"};const t=e=>{if(typeof e!="object")return{[e]:""};const s=t(e[0]),u=t(e[1]);for(let o in s)s[o]+="0";for(let o in u)u[o]+="1";return g(g({},s),u)},n=t(r);return L(n),n},b=r=>r.charCodeAt(0).toString(2),B=r=>{if(r===void 0)return;let t="";const n=e=>{if(typeof e=="string"){const s=b(e);t+="1"+"0".repeat(16-s.length)+s;return}else t+="0";n(e[0]),n(e[1])};return n(r),t},J=(r,t)=>r.split("").map(n=>t[n]).join(""),K=(r,t)=>{const n=3,e=r.length+t.length+n,s=(8-e%8)%8;return"0".repeat(3-s.toString(2).length)+s.toString(2)+r+t+"0".repeat(s)},z=r=>{if(typeof r!="string")throw new TypeError("text must be a string");if(r==="")return{frequency:{},tree:void 0,codes:{},codedTree:"",codedText:"",fullCode:""};const t=X(r),n=q(t),e=D(n),s=B(n),u=J(r,e),o=K(s,u);return{frequencies:t,tree:n,codes:e,codedTree:s,codedText:u,fullCode:o}};class F extends Error{constructor(t){super(t);this.name="InvalidCodeError"}}const G=r=>{if(r.length%8!=0||(r.match(/[01]/g)||[]).length<r.length)return;const t=parseInt(r.slice(0,3),2),n=r.slice(3,r.length-t);let e=0,s={};if(n[e]==="1")e++,s=String.fromCharCode(parseInt(n.slice(e,e+16),2)),e+=16;else{const o=c=>{if(!(e+1+16>n.length)){if(n[e]==="0")e++,c["0"]={},o(c["0"]);else{e++;const d=String.fromCharCode(parseInt(n.slice(e,e+16),2));c["0"]=d,e+=16}if(n[e]==="0")e++,c["1"]={},o(c["1"]);else{e++;const d=String.fromCharCode(parseInt(n.slice(e,e+16),2));c["1"]=d,e+=16}}};e++,o(s)}let u="";if(typeof s=="string"){if(n.length-e<=0)throw new F("Invalid code");u=s.repeat(n.length-e)}else{const o=c=>{if(typeof c=="string")return c;if(e>=n.length)throw new F("Invalid code");return o(c[n[e++]])};for(;e<n.length;)u+=o(s)}return u};function H(r){let t,n,e,s,u;return{c(){t=a("textarea"),n=$(),e=a("textarea"),this.h()},l(o){t=p(o,"TEXTAREA",{}),m(t).forEach(i),n=x(o),e=p(o,"TEXTAREA",{}),m(e).forEach(i),this.h()},h(){e.value=r[1],e.readOnly=!0},m(o,c){l(o,t,c),h(t,r[0]),l(o,n,c),l(o,e,c),s||(u=v(t,"input",r[2]),s=!0)},p(o,[c]){c&1&&h(t,o[0]),c&2&&(e.value=o[1])},i:f,o:f,d(o){o&&i(t),o&&i(n),o&&i(e),s=!1,u()}}}function M(r,t,n){let e="",s="";function u(){e=this.value,n(0,e)}return r.$$.update=()=>{if(r.$$.dirty&1){const o=z(e);n(1,s=o.fullCode)}},[e,s,u]}class P extends T{constructor(t){super();C(this,t,M,H,_,{})}}function Q(r){let t,n,e,s,u;return{c(){t=a("textarea"),n=$(),e=a("textarea"),this.h()},l(o){t=p(o,"TEXTAREA",{}),m(t).forEach(i),n=x(o),e=p(o,"TEXTAREA",{}),m(e).forEach(i),this.h()},h(){e.value=r[1],e.readOnly=!0},m(o,c){l(o,t,c),h(t,r[0]),l(o,n,c),l(o,e,c),s||(u=v(t,"input",r[2]),s=!0)},p(o,[c]){c&1&&h(t,o[0]),c&2&&(e.value=o[1])},i:f,o:f,d(o){o&&i(t),o&&i(n),o&&i(e),s=!1,u()}}}function U(r,t,n){let e="",s="";function u(){e=this.value,n(0,e)}return r.$$.update=()=>{if(r.$$.dirty&1){const o=G(e);o===void 0?n(1,s="wrong code"):n(1,s=o)}},[e,s,u]}class Y extends T{constructor(t){super();C(this,t,U,Q,_,{})}}function Z(r){let t,n,e,s;return t=new P({}),e=new Y({}),{c(){w(t.$$.fragment),n=$(),w(e.$$.fragment)},l(u){S(t.$$.fragment,u),n=x(u),S(e.$$.fragment,u)},m(u,o){I(t,u,o),l(u,n,o),I(e,u,o),s=!0},p:f,i(u){s||(O(t.$$.fragment,u),O(e.$$.fragment,u),s=!0)},o(u){A(t.$$.fragment,u),A(e.$$.fragment,u),s=!1},d(u){j(t,u),u&&i(n),j(e,u)}}}class ee extends T{constructor(t){super();C(this,t,null,Z,_,{})}}export{ee as default};
